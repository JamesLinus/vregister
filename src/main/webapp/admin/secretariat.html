
<!DOCTYPE html>
<html>
<body class="lift:content_id=main">
<div id="main" class="lift:surround?with=default;at=content">
    <head_merge>

        <script>
        function genPass() {
            var pass = document.getElementById("password");
            var reset = true;
            if (pass == "--------") {
                reset = confirm("Chcesz zresetować hasło?");
            } 
            if(reset) {
                    var number = mkPass();
                    document.getElementById("password").value = number.toString();
                }
            return false;
        }
        
        function mkPass(){
            return Math.floor(Math.random() * 89999999) + 10000000;
        }

        function validate() {
            clearInfo();
            var errors = false;
            var name = $('#lastName').val();
            name = jQuery.trim(name);
            if (name.length < 3) {
                $('#infoLastName').text("Błędne nazwisko");
                errors = true;
            }
            name = $('#firstName').val();
            name = jQuery.trim(name);
            if (name.length < 3) {
                $('#infoFirstName').text("Błędne imię");
                errors = true;
            }
            name = $('#email').val();
            name = jQuery.trim(name);
            var array = name.split('@');
            if (array.length < 2) {
                $('#infoEmail').text("Błędny email");
                errors = true;
            }
            else {
                if (array[0].length < 2 || array[1].length < 5) {
                    $('#infoEmail').text("Błędny email");
                    errors = true;
                }
                else {
                    var nextArray = array[1].split('.');
                    if(nextArray.length < 2){
                        $('#infoEmail').text("Błędny email");
                        errors = true;
                    }
                    else {
                        if(nextArray[0].length < 2 || nextArray[1].length < 2){
                            $('#infoEmail').text("Błędny email");
                            errors = true;
                        }
                    }
                }
            }
  
            var password = $('#password').val();
            if (password == "") genPass();
            
            return !errors;
        }

        function edit(elem) {
            $elem  = $(elem);
            clearInfo();
            if ($elem.hasClass('scratched')) $('#info').text('Edycja usuniętego użytkownika');
            else $('#info').text('Edycja użytkownika');

            $elem.children('td').each(function(index){
               switch (index) {
                  case 0:
                       $('#ID').val(this.innerHTML);
                       break;
                  case 1:
                       $('#lastName').val(this.innerHTML);
                       break;
                  case 2:
                       $('#firstName').val(this.innerHTML);
                       break;     
                  case 3:
                       $('#email').val(this.innerHTML);
                       break;
                  case 4:
                       $('#password').val(this.innerHTML);
                       break;
                  default:
                      break;
               }
            });
        }
        
        function clearInfo(){
            $('#infoFirstName').text('');
            $('#infoLastName').text('');
            $('#infoEmail').text('');
        }
        
        function validID(){
            var id = jQuery.trim($('#ID').value());
           if (id == "") return false;
           else return true;
        }
           
	</script>
       <style >
           label { width: 200px; padding-left: 20px; padding-right: 20px;}
           #infoEmail, #infoFirstName, #infoLastName {
               color: red;
           }
           #info { font-style: italic; font-weight: bold;}
           .scratched td {text-decoration: line-through;}
       </style>
       
    </head_merge>

	<div class="menuside">
		<h3>Administracja stronami:</h3>

                <div class="lift:Menu.builder?group=admin;i_item:id="> </div>

		<a href="/">Powrót</a>
	</div>

	<div class="right">
            <h2>Edycja pracowników sekretariatu</h2><br/>
            <form class="lift:AdminPagesSn.editSecretariat" id="linksCont">
                <table> <tr><td colspan="2" id="info">Dodaj nowego użytkownika</td></tr>
                    <tr><td>ID</td><td><input id="ID" /></td></tr>
                    <tr><td>Nazwisko</td><td><input id="lastName" /><span id="infoLastName"></span></td></tr>
                  <tr><td>Imię</td><td><input id="firstName" /><span id="infoFirstName"></span></td></tr>
                  <tr><td>Email</td><td><input id="email"/><span id="infoEmail"></span></td></tr>
                  <tr><td>Hasło</td><td><input id="password" /></td></tr>
                <tr>
                <td colspan="2"><input id="submit"/>
                    <input type ="submit" onclick="return genPass()" value="Generuj hasło"/>
                <input id="delete" />
                <input type="reset"  value="Wyczyść/Nowy" onclick="clearInfo();$('#info').text('Edycja usuniętego użytkownika')"/></td>
                </tr></table>
            </form>
            <br />
                <table>
                    <thead><tr><th>ID</th><th>Nazwisko</th><th>Imię</th><th>email</th><th>hasło</th></tr></thead>
                    
                    <tbody class="lift:AdminPagesSn.showSecretariat"><tr onclick="edit(this)" id="0"><td></td>
                            <td></td><td></td><td></td></tr></tbody>

                </table>
                 
          
             <br /><br />
       </div>
        <br class="spacer" />
       

</div>
</body></html>

